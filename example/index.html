<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,viewport-fit=cover,user-scalable=no">
    <title>LiveSDK Example</title>
    <style>
        #live-sdk-container {
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
        }
    </style>
</head>
<body>
<div id="live-sdk-container"></div>
</body>
<script src="live-sdk.js"></script>
<script>
    async function initSdk() {
        const sdk = new LiveSDK({
            // entryUrl: '//live-dev.edusoho.cn',
            entryUrl: '//127.0.0.1:8083',
        });

        // 请在调用 sdk.connect 之前调用 on，否则可能无法收到事件
        sdk.on("Goods.Buy", (goodsNo) => {
            console.log("Event[Goods.Buy] goods no ", goodsNo);

            // 模拟支付完成后，回调
            setTimeout(() => {
                sdk.notify("Goods.Paid", {no: "G1001", goto: "//www.edusoho.com"});
            }, 3000);
        });

        await sdk.connect({
            roomId: 23000,
            token: "eyJraWQiOiJmbHZfc2VsZl9hbGl5dW4iLCJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1aWQiOjc1MTA3MDM1ODkwNjgzMywicm9sZSI6InZpZXdlciIsImlzcyI6ImxpdmUgY2xpZW50IGFwaSIsIm5hbWUiOiJoZWxsbyIsInJpZCI6MjMwMDAsInR5cGUiOiJsYW5kc2NhcGUiLCJleHAiOjE2MzcwMzUyNDB9.AL7kcDK8J8jufHOKGDtgDe0VheMGy7wBK6tQ4MHAgV4",
            container: "live-sdk-container",
            floatButtons: [
                {
                    code: "goods",
                    goods: [
                        {no: "G1001", name: "测试商品1", price: 12350, picture: "//test-1.jpg", description: "这个商品的描述<b>支持HTML</b>"},
                        {no: "G1002", name: "测试商品2", price: 12350, picture: "//test-2.jpg", description: "这个商品的描述<b>支持HTML</b>"}
                    ]
                }
            ],
            tabs: [
                {code: "chat", name: "互动"},
                {code: "rank", name: "排行榜", dataUrl: "//data-url"},
                {code: "desc", name: "介绍", content: "这里是介绍的具体内容"},
            ]
        });
    }
    initSdk();
</script>
</html>
